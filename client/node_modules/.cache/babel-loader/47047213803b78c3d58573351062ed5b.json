{"ast":null,"code":"import _asyncToGenerator from\"/Users/rayandiouf/Desktop/movie-suggester/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/rayandiouf/Desktop/movie-suggester/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/rayandiouf/Desktop/movie-suggester/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/rayandiouf/Desktop/movie-suggester/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/rayandiouf/Desktop/movie-suggester/client/node_modules/@babel/runtime/regenerator/index.js\";import{useMutation}from\"@apollo/client\";import React,{useState}from\"react\";import{Link}from\"react-router-dom\";import{ADD_USER}from\"../utils/mutation\";import Auth from\"../utils/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Signup(){var _useState=useState({username:\"\",email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useMutation=useMutation(ADD_USER),_useMutation2=_slicedToArray(_useMutation,2),addUser=_useMutation2[0],error=_useMutation2[1].error;var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setFormState(_objectSpread(_objectSpread({},formState),{},_defineProperty({},name,value)));};var handleFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _yield$addUser,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return addUser({variables:_objectSpread({},formState)});case 4:_yield$addUser=_context.sent;data=_yield$addUser.data;if(!error){_context.next=8;break;}throw new Error(\"something went wrong\");case 8:Auth.login(data.addUser.token);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 14:setFormState({username:\"\",email:\"\",password:\"\"});case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"loginPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"containerh1\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Sign up\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"inputs\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"username\",type:\"username\",name:\"username\",value:formState.username,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"email\",type:\"text\",name:\"email\",value:formState.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"password\",value:formState.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Enter\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"signupBtn\"})]})})});}export default Signup;","map":{"version":3,"sources":["/Users/rayandiouf/Desktop/movie-suggester/client/src/pages/Signup.js"],"names":["useMutation","React","useState","Link","ADD_USER","Auth","Signup","username","email","password","formState","setFormState","addUser","error","handleChange","event","target","name","value","handleFormSubmit","preventDefault","variables","data","Error","login","token","console"],"mappings":"kqBAAA,OAASA,WAAT,KAA4B,gBAA5B,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,QAAT,KAAyB,mBAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,eAAjB,C,6IACA,QAASC,CAAAA,MAAT,EAAkB,CAChB,cAAkCJ,QAAQ,CAAC,CACzCK,QAAQ,CAAE,EAD+B,CAEzCC,KAAK,CAAE,EAFkC,CAGzCC,QAAQ,CAAE,EAH+B,CAAD,CAA1C,wCAAOC,SAAP,eAAkBC,YAAlB,eAKA,iBAA6BX,WAAW,CAACI,QAAD,CAAxC,8CAAOQ,OAAP,kBAAkBC,KAAlB,kBAAkBA,KAAlB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9B,kBAAwBA,KAAK,CAACC,MAA9B,CAAQC,IAAR,eAAQA,IAAR,CAAcC,KAAd,eAAcA,KAAd,CAEAP,YAAY,gCACPD,SADO,wBAETO,IAFS,CAEFC,KAFE,GAAZ,CAID,CAPD,CAQA,GAAMC,CAAAA,gBAAgB,0FAAG,iBAAOJ,KAAP,0IACvBA,KAAK,CAACK,cAAN,GADuB,sCAGER,CAAAA,OAAO,CAAC,CAC7BS,SAAS,kBAAOX,SAAP,CADoB,CAAD,CAHT,qCAGbY,IAHa,gBAGbA,IAHa,KAMjBT,KANiB,8BAOb,IAAIU,CAAAA,KAAJ,CAAU,sBAAV,CAPa,QASrBlB,IAAI,CAACmB,KAAL,CAAWF,IAAI,CAACV,OAAL,CAAaa,KAAxB,EATqB,iFAWrBC,OAAO,CAACb,KAAR,cAXqB,QAavBF,YAAY,CAAC,CACXJ,QAAQ,CAAE,EADC,CAEXC,KAAK,CAAE,EAFI,CAGXC,QAAQ,CAAE,EAHC,CAAD,CAAZ,CAbuB,qEAAH,kBAAhBU,CAAAA,gBAAgB,4CAAtB,CAmBA,mBACE,sCACE,YAAK,SAAS,CAAC,WAAf,uBACI,aAAK,SAAS,CAAC,WAAf,wBACE,YAAK,SAAS,CAAC,aAAf,uBACE,+BADF,EADF,cAIE,YAAK,SAAS,CAAC,QAAf,uBACJ,cAAM,QAAQ,CAAEA,gBAAhB,wBACM,cACE,WAAW,CAAC,UADd,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,KAAK,CAAET,SAAS,CAACH,QAJnB,CAKE,QAAQ,CAAEO,YALZ,EADN,cAQM,cACE,WAAW,CAAC,OADd,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAEJ,SAAS,CAACF,KAJnB,CAKE,QAAQ,CAAEM,YALZ,EARN,cAeM,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,UAFP,CAGE,KAAK,CAAEJ,SAAS,CAACD,QAHnB,CAIE,QAAQ,CAAEK,YAJZ,EAfN,cAqBM,eAAQ,IAAI,CAAC,QAAb,mBArBN,GADI,EAJF,cA6BE,YAAK,SAAS,CAAC,WAAf,EA7BF,GADJ,EADF,EADF,CAuCD,CAED,cAAeR,CAAAA,MAAf","sourcesContent":["import { useMutation } from \"@apollo/client\";\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { ADD_USER } from \"../utils/mutation\";\nimport Auth from \"../utils/auth\";\nfunction Signup() {\n  const [formState, setFormState] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n  });\n  const [addUser, { error }] = useMutation(ADD_USER);\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n\n    setFormState({\n      ...formState,\n      [name]: value,\n    });\n  };\n  const handleFormSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      const { data } = await addUser({\n        variables: { ...formState },\n      });\n      if (error) {\n        throw new Error(\"something went wrong\");\n      }\n      Auth.login(data.addUser.token);\n    } catch (e) {\n      console.error(e);\n    }\n    setFormState({\n      username: \"\",\n      email: \"\",\n      password: \"\",\n    });\n  };\n  return (\n    <>\n      <div className=\"loginPage\">\n          <div className=\"container\">\n            <div className=\"containerh1\">\n              <h1>Sign up</h1>\n            </div>\n            <div className=\"inputs\">\n        <form onSubmit={handleFormSubmit}>\n              <input\n                placeholder=\"username\"\n                type=\"username\"\n                name=\"username\"\n                value={formState.username}\n                onChange={handleChange}\n              />\n              <input\n                placeholder=\"email\"\n                type=\"text\"\n                name=\"email\"\n                value={formState.email}\n                onChange={handleChange}\n              />\n              <input\n                type=\"text\"\n                name=\"password\"\n                value={formState.password}\n                onChange={handleChange}\n              />\n              <button type=\"submit\">Enter</button>\n        </form>\n            </div>\n            <div className=\"signupBtn\">\n              {/* <Link to=\"/login\">Login Instead</Link> */}\n            </div>\n          </div>\n      </div>\n    </>\n  );\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}