{"ast":null,"code":"import _classCallCheck from\"/Users/rayandiouf/Desktop/movie-suggester/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/rayandiouf/Desktop/movie-suggester/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import decode from'jwt-decode';var AuthService=/*#__PURE__*/function(){function AuthService(){_classCallCheck(this,AuthService);}_createClass(AuthService,[{key:\"getProfile\",value:function getProfile(){return decode(this.getToken());}},{key:\"loggedIn\",value:function loggedIn(){var token=this.getToken();return!!token&&!this.isTokenExpired(token);}},{key:\"isTokenExpired\",value:function isTokenExpired(token){try{var decoded=decode(token);if(decoded.exp<Date.now()/1000){return true;}else return false;}catch(err){return false;}}},{key:\"getToken\",value:function getToken(){return localStorage.getItem('id_token');}},{key:\"login\",value:function login(idToken){localStorage.setItem('id_token',idToken);window.location.assign(\"/\");}},{key:\"logout\",value:function logout(){localStorage.removeItem('id_token');window.location.assign(\"/\");}}]);return AuthService;}();;export default new AuthService();","map":{"version":3,"sources":["/Users/rayandiouf/Desktop/movie-suggester/client/src/utils/auth.js"],"names":["decode","AuthService","getToken","token","isTokenExpired","decoded","exp","Date","now","err","localStorage","getItem","idToken","setItem","window","location","assign","removeItem"],"mappings":"0QAAA,MAAOA,CAAAA,MAAP,KAAmB,YAAnB,C,GAEMC,CAAAA,W,qIACF,qBAAa,CACT,MAAOD,CAAAA,MAAM,CAAC,KAAKE,QAAL,EAAD,CAAb,CACH,C,wBACD,mBAAW,CACP,GAAMC,CAAAA,KAAK,CAAG,KAAKD,QAAL,EAAd,CACA,MAAO,CAAC,CAACC,KAAF,EAAW,CAAC,KAAKC,cAAL,CAAoBD,KAApB,CAAnB,CACH,C,8BACD,wBAAeA,KAAf,CAAsB,CAClB,GAAG,CACC,GAAME,CAAAA,OAAO,CAAGL,MAAM,CAACG,KAAD,CAAtB,CACA,GAAGE,OAAO,CAACC,GAAR,CAAcC,IAAI,CAACC,GAAL,GAAa,IAA9B,CAAoC,CAChC,MAAO,KAAP,CACH,CAFD,IAEO,OAAO,MAAP,CACV,CAAC,MAAMC,GAAN,CAAW,CACT,MAAO,MAAP,CACH,CACJ,C,wBACD,mBAAW,CACP,MAAOC,CAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAP,CACH,C,qBAED,eAAMC,OAAN,CAAe,CACXF,YAAY,CAACG,OAAb,CAAqB,UAArB,CAAiCD,OAAjC,EACAE,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,GAAvB,EACH,C,sBAED,iBAAS,CACLN,YAAY,CAACO,UAAb,CAAwB,UAAxB,EAEAH,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,GAAvB,EACH,C,2BACJ,CACD,cAAe,IAAIf,CAAAA,WAAJ,EAAf","sourcesContent":["import decode from 'jwt-decode';\n\nclass AuthService {\n    getProfile() {\n        return decode(this.getToken());\n    }\n    loggedIn() {\n        const token = this.getToken();\n        return !!token && !this.isTokenExpired(token);\n    }\n    isTokenExpired(token) {\n        try{\n            const decoded = decode(token);\n            if(decoded.exp < Date.now() / 1000) {\n                return true;\n            } else return false;\n        } catch(err) {\n            return false;\n        }\n    }\n    getToken() {\n        return localStorage.getItem('id_token');\n    }\n    \n    login(idToken) {\n        localStorage.setItem('id_token', idToken);\n        window.location.assign(\"/\");\n    }\n\n    logout() {\n        localStorage.removeItem('id_token');\n\n        window.location.assign(\"/\");\n    }\n};\nexport default new AuthService();"]},"metadata":{},"sourceType":"module"}